#include <stdio.h>
#include <unistd.h>
#include <sys/times.h>
#include <time.h>

void busy_wait(struct tms start, clock_t wait_ticks) {
    clock_t end_ticks = start.tms_utime + wait_ticks;
    
    while (times(NULL) < end_ticks) {
        for (int i = 0; i < 10000; i++) {}
    }
}

int main() {
    struct tms start_tms, end_tms;
    clock_t wait_ticks = sysconf(_SC_CLK_TCK); // 1 second worth of ticks
    
    times(&start_tms);
    busy_wait(start_tms, wait_ticks);
    times(&end_tms);
    
    printf("Elapsed time using busy_wait with times: %.9f seconds\n", 
           (end_tms.tms_utime - start_tms.tms_utime) / (double) sysconf(_SC_CLK_TCK));
    return 0;
}
